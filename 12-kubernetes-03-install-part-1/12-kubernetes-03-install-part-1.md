# Домашнее задание к занятию "12.3 Развертывание кластера на собственных серверах, лекция 1"
Поработав с персональным кластером, можно заняться проектами. Вам пришла задача подготовить кластер под новый проект.

## Задание 1: Описать требования к кластеру

<details>
    <summary style="font-size:15px">Описание:</summary>

Сначала проекту необходимо определить требуемые ресурсы. Известно, что проекту нужны база данных, система кеширования, а само приложение состоит из бекенда и фронтенда. Опишите, какие ресурсы нужны, если известно:

* База данных должна быть отказоустойчивой. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
* Кэш должен быть отказоустойчивый. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
* Фронтенд обрабатывает внешние запросы быстро, отдавая статику. Потребляет не более 50 МБ ОЗУ на каждый экземпляр, 0.2 ядра. 5 копий.
* Бекенд потребляет 600 МБ ОЗУ и по 1 ядру на копию. 10 копий.

## Как оформить ДЗ?

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

План расчета
1. Сначала сделайте расчет всех необходимых ресурсов.
2. Затем прикиньте количество рабочих нод, которые справятся с такой нагрузкой.
3. Добавьте к полученным цифрам запас, который учитывает выход из строя как минимум одной ноды.
4. Добавьте служебные ресурсы к нодам. Помните, что для разных типов нод требовния к ресурсам разные.
5. Рассчитайте итоговые цифры.
6. В результате должно быть указано количество нод и их параметры.

</details>

<details>
    <summary style="font-size:15px">Решение:</summary>

    Общее кол-во требуемых ресурсов:  
    База - 12Гб + 3 CPU  
    Кэш - 12Гб + 3 CPU  
    Фронтенд - 250Мб + 1 CPU  
    Бекенд - 6Гб + 10 CPU  
    --
    Сумма ресурсов (расчет): 30,3Гб + 17 CPU  


    CP нода1:  
    Служебные ресурсы - 3Гб + 3 CPU  
    Фронтенд *2 экз - 100Мб + 0,4 CPU  
    --
    Сумма ресурсов (расчет): 3,1Гб + 3,4 CPU  
    Конфигурация: 4Гб + 4 CPU  

    CP нода2:  
    Служебные ресурсы - 3Гб + 3 CPU  
    Фронтенд *3 экз - 150Мб + 0,6 CPU  
    --
    Сумма ресурсов (расчет): 3,15Гб + 3,6 CPU  
    Конфигурация: 4Гб + 4 CPU  

    CP нода3:  
    Служебные ресурсы - 3Гб + 3 CPU  
    Бекенд * 1 - 600Мб + 1 CPU  
    --
    Сумма ресурсов (расчет): 3,6Гб + 4 CPU  
    Конфигурация: 4Гб + 4 CPU  


    Worker node1:  
    Служебные ресурсы - 1Гб + 1 CPU  
    База - 4Гб + 1 CPU  
    Кэш - 4Гб + 1 CPU  
    Бекенд * 1 - 600Мб + 1 CPU  
    --
    Сумма ресурсов (расчет): 9,6Гб + 4 CPU  
    Конфигурация: 12Гб + 4 CPU  

    Worker node2:  
    Служебные ресурсы - 1Гб + 1 CPU  
    База - 4Гб + 1 CPU  
    Кэш - 4Гб + 1 CPU  
    Бекенд * 1 - 600Мб + 1 CPU  
    --
    Сумма ресурсов (расчет): 9,6Гб + 4 CPU  
    Конфигурация: 12Гб + 4 CPU  

    Worker node3:  
    Служебные ресурсы - 1Гб + 1 CPU  
    База - 4Гб + 1 CPU  
    Кэш - 4Гб + 1 CPU  
    Бекенд * 1 - 600Мб + 1 CPU  
    --
    Сумма ресурсов (расчет): 9,6Гб + 4 CPU  
    Конфигурация: 12Гб + 4 CPU  

    Worker node4:  
    Служебные ресурсы - 1Гб + 1 CPU  
    Бекенд * 3 - 1800Мб + 3 CPU  
    --
    Сумма ресурсов (расчет): 2,8Гб + 4 CPU  
    Конфигурация: 4Гб + 4 CPU  

    Worker node5:  
    Служебные ресурсы - 1Гб + 1 CPU  
    Бекенд * 3 - 1800Мб + 3 CPU  
    --
    Сумма ресурсов (расчет): 2,8Гб + 4 CPU  
    Конфигурация: 4Гб + 4 CPU  

    Резервная нода:  
    В качестве конфигурации резервной ноды необходимо использовать максимальные параметры из всего списка нод.  
    Spare node5:  
    Конфигурация: 12Гб + 4 CPU  

    Расхождения между расчетной суммой требуемых ресурсов и фактической конфигурацией обусловлены ограничениями платформой яндекс облако при которых кол-во CPU устанавливается кратное двум, а количество памяти: cpu_count*(n), где n-1,2,4,6,8...

    Итого:  
    CP нод с конфигурацией (RAM/CPU) 4/4 - 3шт.  
    Worker нод с конфигурацией 12/4 - 3шт.  
    Worker нод с конфигурацией 4/4 - 3шт.  
    Резерная нода с конфигурацией 12/4 - 1шт.  



</details>